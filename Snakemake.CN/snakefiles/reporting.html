

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reports &mdash; Snakemake 5.6.0+8.g89bc383.dirty documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/sphinx-argparse.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The Snakemake API" href="../api_reference/snakemake.html" />
    <link rel="prev" title="Distribution and Reproducibility" href="deployment.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Snakemake
          

          
          </a>

          
            
            
              <div class="version">
                5.6.0+8.g89bc383.dirty
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/tutorial.html">Snakemake Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/short.html">Short tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Executing workflows</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../executable.html">Executing Snakemake</a></li>
</ul>
<p class="caption"><span class="caption-text">Defining workflows</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="writing_snakefiles.html">Writing Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules.html">Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="modularization.html">Modularization</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_files.html">Remote files</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Distribution and Reproducibility</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reports</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/snakemake.html">The Snakemake API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/snakemake_utils.html">Additional utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/internal/modules.html">Internal API</a></li>
</ul>
<p class="caption"><span class="caption-text">Project Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project_info/citations.html">Citing and Citations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_info/more_resources.html">More Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_info/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_info/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_info/authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_info/history.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_info/license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Snakemake</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Reports</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/snakefiles/reporting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="reports">
<span id="snakefiles-reports"></span><h1>Reports<a class="headerlink" href="#reports" title="Permalink to this headline">¶</a></h1>
<p>From Snakemake 5.1 on, it is possible to automatically generate detailed self-contained HTML reports that encompass runtime statistics, provenance information, workflow topology and results.
For the latter, the Snakefile has to be annotated with additional information.
Each output file that shall be part of the report has to be marked with the <code class="docutils literal notranslate"><span class="pre">report</span></code> flag, which optionally points to a caption in <a class="reference external" href="http://docutils.sourceforge.net/rst.html">restructured text format</a> and allows to define a <code class="docutils literal notranslate"><span class="pre">category</span></code> for grouping purposes.
Moreover, a global workflow description can be defined via the <code class="docutils literal notranslate"><span class="pre">report</span></code> directive.
Consider the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">report</span><span class="p">:</span> <span class="s2">&quot;report/workflow.rst&quot;</span>


<span class="n">rule</span> <span class="nb">all</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="p">[</span><span class="s2">&quot;fig1.svg&quot;</span><span class="p">,</span> <span class="s2">&quot;fig2.png&quot;</span><span class="p">]</span>


<span class="n">rule</span> <span class="n">c</span><span class="p">:</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="s2">&quot;test.{i}.out&quot;</span>
    <span class="n">singularity</span><span class="p">:</span>
        <span class="s2">&quot;docker://continuumio/miniconda3:4.4.10&quot;</span>
    <span class="n">conda</span><span class="p">:</span>
        <span class="s2">&quot;envs/test.yaml&quot;</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;sleep `shuf -i 1-3 -n 1`; touch {output}&quot;</span>


<span class="n">rule</span> <span class="n">a</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="n">expand</span><span class="p">(</span><span class="s2">&quot;test.{i}.out&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="n">report</span><span class="p">(</span><span class="s2">&quot;fig1.svg&quot;</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;report/fig1.rst&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Step 1&quot;</span><span class="p">)</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;sleep `shuf -i 1-3 -n 1`; cp data/fig1.svg {output}&quot;</span>


<span class="n">rule</span> <span class="n">b</span><span class="p">:</span>
    <span class="nb">input</span><span class="p">:</span>
        <span class="n">expand</span><span class="p">(</span><span class="s2">&quot;test.{i}.out&quot;</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
    <span class="n">output</span><span class="p">:</span>
        <span class="n">report</span><span class="p">(</span><span class="s2">&quot;fig2.png&quot;</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;report/fig2.rst&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;Step 2&quot;</span><span class="p">)</span>
    <span class="n">shell</span><span class="p">:</span>
        <span class="s2">&quot;sleep `shuf -i 1-3 -n 1`; cp data/fig2.png {output}&quot;</span>
</pre></div>
</div>
<p>As can be seen, we define a global description which is contained in the file <code class="docutils literal notranslate"><span class="pre">report/workflow.rst</span></code>.
In addition, we mark <code class="docutils literal notranslate"><span class="pre">fig1.svg</span></code> and <code class="docutils literal notranslate"><span class="pre">fig2.png</span></code> for inclusion into the report, while in both cases specifying a caption text via again referring to a restructured text file.
Note the paths to the <code class="docutils literal notranslate"><span class="pre">.rst</span></code>-files are interpreted relative to the current Snakefile.
Inside the <code class="docutils literal notranslate"><span class="pre">.rst</span></code>-files you can use <a class="reference external" href="http://jinja.pocoo.org">Jinja2</a> templating to access context information.
In case of the global description, you can access the config dictionary via <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">snakemake.config</span> <span class="pre">}}</span></code>, (e.g., use <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">snakemake.config[&quot;mykey&quot;]</span> <span class="pre">}}</span></code> to access the key <code class="docutils literal notranslate"><span class="pre">mykey</span></code>).
In case of output files, you can access the same values as available with the <a class="reference internal" href="rules.html#snakefiles-external-scripts"><span class="std std-ref">script directive</span></a>.
Moreover, in every <code class="docutils literal notranslate"><span class="pre">.rst</span></code> document, you can link to</p>
<ul class="simple">
<li>the <strong>Rules</strong> section (with <code class="docutils literal notranslate"><span class="pre">Rules_</span></code>),</li>
<li>the <strong>Statistics</strong> section (with <code class="docutils literal notranslate"><span class="pre">Statistics_</span></code>),</li>
<li>the <strong>Results</strong> section (with <code class="docutils literal notranslate"><span class="pre">Results_</span></code>),</li>
<li>any <strong>category</strong> section (with <code class="docutils literal notranslate"><span class="pre">Mycategory_</span></code>, while <code class="docutils literal notranslate"><span class="pre">Mycategory</span></code> is the name given for the category argument of the report flag). E.g., with above example, you could write <code class="docutils literal notranslate"><span class="pre">see</span> <span class="pre">`Step</span> <span class="pre">2`_</span></code> in order to link to the section with the results that have been assigned to the category <code class="docutils literal notranslate"><span class="pre">Step</span> <span class="pre">2</span></code>.</li>
<li>any <strong>file</strong> marked with the report flag (with <code class="docutils literal notranslate"><span class="pre">myfile.txt_</span></code>, while <code class="docutils literal notranslate"><span class="pre">myfile.txt</span></code> is the basename of the file, without any leading directories). E.g., with above example, you could write <code class="docutils literal notranslate"><span class="pre">see</span> <span class="pre">fig2.png_</span></code> in order to link to the result in the report document.</li>
</ul>
<p>For details about the hyperlink mechanism of restructured text see <a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/quickref.html#hyperlink-targets">here</a>.</p>
<p>To create the report simply run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>snakemake --report report.html
</pre></div>
</div>
<p>after your workflow has finished.
All other information contained in the report (e.g. runtime statistics) is automatically collected during creation.
These statistics are obtained from the metadata that is stored in the <code class="docutils literal notranslate"><span class="pre">.snakemake</span></code> directory inside your working directory.
The report for above example can be found <code class="xref download docutils literal notranslate"><span class="pre">here</span></code>.
The full example source code can be found <a class="reference external" href="https://bitbucket.org/snakemake/snakemake/src/master/tests/test_report/">here</a>.</p>
<p>Note that the report can be restricted to particular jobs and results by specifying targets at the command line, analog to normal Snakemake execution.
For example, with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>snakemake fig1.svg --report report-short.html
</pre></div>
</div>
<p>the report contains only <code class="docutils literal notranslate"><span class="pre">fig1.svg</span></code>.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../api_reference/snakemake.html" class="btn btn-neutral float-right" title="The Snakemake API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="deployment.html" class="btn btn-neutral float-left" title="Distribution and Reproducibility" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2016, Johannes Koester

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>